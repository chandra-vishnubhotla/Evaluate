/*! dataTables.cellEdit v1.0.19 */
function getInputHtml(e,t,l){var a,i,s,n,c,o,r="",d="",u=!1;if(s={focus:!0,html:null},t.inputTypes&&$.each(t.inputTypes,(function(t,l){l.column==e&&(i=(a=l).type.toLowerCase())})),t.inputCss&&(n=t.inputCss),t.wrapperHtml){var p=t.wrapperHtml.split("{content}");2===p.length&&(r=p[0],d=p[1])}switch(t.confirmationButton&&(t.confirmationButton.listenToKeys&&(u=t.confirmationButton.listenToKeys),c=t.confirmationButton.confirmCss,o=t.confirmationButton.cancelCss,i+="-confirm"),i){case"list":s.html=r+"<select class='"+n+"' onchange='$(this).updateEditableCell(this);'>",$.each(a.options,(function(e,t){l==t.value?s.html=s.html+"<option value='"+t.value+"' selected>"+t.display+"</option>":s.html=s.html+"<option value='"+t.value+"' >"+t.display+"</option>"})),s.html=s.html+"</select>"+d,s.focus=!1;break;case"list-confirm":s.html=r+"<select class='"+n+"'>",$.each(a.options,(function(e,t){l==t.value?s.html=s.html+"<option value='"+t.value+"' selected>"+t.display+"</option>":s.html=s.html+"<option value='"+t.value+"' >"+t.display+"</option>"})),s.html=s.html+"</select>&nbsp;<a href='javascript:void(0);' class='"+c+"' onclick='$(this).updateEditableCell(this);'>Confirm</a> <a href='javascript:void(0);' class='"+o+"' onclick='$(this).cancelEditableCell(this)'>Cancel</a>"+d,s.focus=!1;break;case"datepicker":case"datepicker-confirm":if(void 0===jQuery.ui){alert("jQuery UI is required for the DatePicker control but it is not loaded on the page!");break}jQuery(".datepick").datepicker("destroy"),s.html=r+"<input id='ejbeatycelledit' type='text' name='date' class='datepick "+n+"'   value='"+l+"'></input> &nbsp;<a href='javascript:void(0);' class='"+c+"' onclick='$(this).updateEditableCell(this)'>Confirm</a> <a href='javascript:void(0);' class='"+o+"' onclick='$(this).cancelEditableCell(this)'>Cancel</a>"+d,setTimeout((function(){var e="http://jqueryui.com/resources/demos/datepicker/images/calendar.gif";void 0!==a.options&&void 0!==a.options.icon&&(e=a.options.icon);jQuery(".datepick").datepicker({showOn:"button",buttonImage:e,buttonImageOnly:!0,buttonText:"Select date"})}),100);break;case"text-confirm":case"undefined-confirm":s.html=r+"<input id='ejbeatycelledit' class='"+n+"' value='"+l+"'"+(u?" onkeyup='if(event.keyCode==13) {$(this).updateEditableCell(this);} else if (event.keyCode===27) {$(this).cancelEditableCell(this);}'":"")+"></input>&nbsp;<a href='javascript:void(0);' class='"+c+"' onclick='$(this).updateEditableCell(this)'>Confirm</a> <a href='javascript:void(0);' class='"+o+"' onclick='$(this).cancelEditableCell(this)'>Cancel</a>"+d;break;case"textarea":s.html=r+"<textarea id='ejbeatycelledit' class='"+n+"'  onfocusout='$(this).updateEditableCell(this)' >"+l+"</textarea>"+d;break;case"textarea-confirm":s.html=r+"<textarea id='ejbeatycelledit' class='"+n+"'>"+l+"</textarea><a href='javascript:void(0);' class='"+c+"' onclick='$(this).updateEditableCell(this)'>Confirm</a> <a href='javascript:void(0);' class='"+o+"' onclick='$(this).cancelEditableCell(this)'>Cancel</a>"+d;break;case"number-confirm":s.html=r+"<input id='ejbeatycelledit' type='number' class='"+n+"' value='"+l+"'"+(u?" onkeyup='if(event.keyCode==13) {$(this).updateEditableCell(this);} else if (event.keyCode===27) {$(this).cancelEditableCell(this);}'":"")+"></input>&nbsp;<a href='javascript:void(0);' class='"+c+"' onclick='$(this).updateEditableCell(this)'>Confirm</a> <a href='javascript:void(0);' class='"+o+"' onclick='$(this).cancelEditableCell(this)'>Cancel</a>"+d;break;default:s.html=r+"<input id='ejbeatycelledit' class='"+n+"' onfocusout='$(this).updateEditableCell(this)' value='"+l+"'></input>"+d}return s}function getInputField(e){var t;if("a"===$(e).prop("nodeName").toLowerCase())$(e).siblings("input").length>0&&(t=$(e).siblings("input")),$(e).siblings("select").length>0&&(t=$(e).siblings("select")),$(e).siblings("textarea").length>0&&(t=$(e).siblings("textarea"));else t=$(e);return t}function sanitizeCellValue(e){return null==e||e.length<1?"":(isNaN(e)&&(e=e.replace(/'/g,"&#39;")),e)}jQuery.fn.dataTable.Api.register("MakeCellsEditable()",(function(e){var t=this.table();jQuery.fn.extend({updateEditableCell:function(t){var l=$(t).closest("table").DataTable().table(),a=l.row($(t).parents("tr")),i=l.cell($(t).parents("td, th")),s=i.index().column,n=getInputField(t),c=n.val();function o(){e.allowNulls.errorClass?$(n).addClass(e.allowNulls.errorClass):$(n).css({border:"red solid 1px"})}function r(t){var l=i.data();i.data(t),e.onUpdate(i,a,l)}!c&&e.allowNulls&&1!=e.allowNulls?e.allowNulls.columns?e.allowNulls.columns.indexOf(s)>-1?r(c):o():c||o():c&&e.onValidate?e.onValidate(i,a,c)?r(c):o():r(c);var d=l.page.info().page;l.page(d).draw(!1)},cancelEditableCell:function(e){var t=$(e.closest("table")).DataTable().table(),l=t.cell($(e).parents("td, th"));l.data(l.data()),t.draw()}}),"destroy"===e&&($(t.body()).off("click","td"),t=null),null!=t&&$(t.body()).on("click","td",(function(){var l=t.cell(this).index().column;if(e.columns&&e.columns.indexOf(l)>-1||!e.columns){var a=t.row($(this).parents("tr"));editableCellsRow=a;var i=t.cell(this).node(),s=t.cell(this).data();if(s=sanitizeCellValue(s),!$(i).find("input").length&&!$(i).find("select").length&&!$(i).find("textarea").length){var n=getInputHtml(l,e,s);$(i).html(n.html),n.focus&&$("#ejbeatycelledit").focus()}}}))}));
